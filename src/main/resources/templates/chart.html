<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollable Chart</title>
    <link rel="stylesheet" href="/css/chart.css">
    <link rel="stylesheet" href="/css/header.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<header>
    <nav class="navbar">
        <div class="logo">
            <a href="#">
                <svg width="89" height="89" viewBox="0 0 89 89" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_383_492)">
                        <path d="M16.5485 50.2744C16.5485 44.5 21.2765 40.0045 27.4384 40.0045C31.0038 40.0045 34.2592 41.5934 36.1194 43.9962L33.4453 46.6702C32.7361 45.7621 31.8311 45.0257 30.7978 44.5157C29.7645 44.0058 28.6294 43.7355 27.4772 43.7249C23.7955 43.7249 20.8502 46.4765 20.8502 50.2744C20.8502 54.1111 23.7955 56.8626 27.4772 56.8626C28.6707 56.8612 29.8477 56.5841 30.9165 56.0531C31.9853 55.522 32.9171 54.7513 33.6391 53.801L36.2744 56.3976C34.4917 58.9166 31.0813 60.583 27.4384 60.583C21.2765 60.583 16.5485 56.0875 16.5485 50.2744Z" fill="#255BE3"/>
                        <path d="M39.7623 40.7021H43.9865V59.8855H39.7623V40.7021Z" fill="#255BE3"/>
                        <path d="M51.8537 54.7311V44.2675H47.2419V40.7021H52.0474V36.5941L56.0004 34.6564V40.7021H62.2786V44.2675H56.0004V54.0336C56.0004 55.9713 57.0855 56.8239 59.1395 56.8239C60.2082 56.8294 61.2656 56.6047 62.2398 56.165V59.808C61.0192 60.3435 59.697 60.608 58.3644 60.583C54.6052 60.583 51.8537 58.5291 51.8537 54.7311Z" fill="#255BE3"/>
                        <path d="M65.6115 40.7021H69.8357V59.8855H65.6115V40.7021Z" fill="#255BE3"/>
                        <path d="M54.7602 28.4945C58.2295 28.4862 61.6499 29.3129 64.7324 30.9047C67.815 32.4966 70.4692 34.8069 72.471 37.6405H67.5492C65.9359 35.8474 63.9637 34.4136 61.7605 33.4321C59.5572 32.4506 57.1722 31.9434 54.7602 31.9434C52.3483 31.9434 49.9632 32.4506 47.76 33.4321C45.5567 34.4136 43.5845 35.8474 41.9713 37.6405H37.0495C39.0512 34.8069 41.7055 32.4966 44.788 30.9047C47.8706 29.3129 51.2909 28.4862 54.7602 28.4945Z" fill="#FF3C28"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_383_492">
                            <rect width="56" height="32.3599" fill="white" transform="translate(16.5 28.3201)"/>
                        </clipPath>
                    </defs>
                </svg>

            </a>
        </div>
        <ul class="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Services</a></li>
            <li class="dropdown">
                <a href="#" class="dropbtn">More</a>
                <div class="dropdown-content">
                    <a href="#">Link 1</a>
                    <a href="#">Link 2</a>
                    <a href="#">Link 3</a>
                </div>
            </li>
            <li><a href="#">Contact</a></li>
        </ul>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
</header>

<div class="container">
    <div class="chart_header">
        <h1>AAPL</h1>
        <div class="button-wrapper">
            <button onclick="changeChartType('line')">Line Chart</button>
            <button onclick="changeChartType('bar')">Bar Chart</button>
            <button onclick="changeChartType('candlestick')">candlestick</button>
        </div>
    </div>

    <div class="chart-wrapper">
        <canvas id="myChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
<script>
    let chartType = 'line';
    const ctx = document.getElementById('myChart').getContext('2d');
    const data = {
        labels: ['1-22',' 2-22',' 3-22',' 4-22',' 5-22',' 6-22','7-22','8-22','9-22','10-22','11-22','12-22'],
        datasets: [{
            label: 'Stock Price',
            data: [65, 59, 80, 81, 56, 55, 40, 75, 70, 60, 85, 90],
            borderColor: 'rgba(75, 192, 192, 1)',
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderWidth: 1,
            fill: false
        }]
    };


    const config = {
        type: chartType,
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    type: 'category',
                    title: {
                        display: true,
                        text: 'Months'
                    }
                },
                y: {
                    type: 'linear',
                    title: {
                        display: true,
                        text: 'Price'
                    }
                }
            },
            plugins: {
                zoom: {
                    pan: {
                        enabled: true,
                        mode: 'y'
                    },
                    zoom: {
                        wheel: {
                            enabled: true
                        },
                        pinch: {
                            enabled: true
                        },
                        mode: 'y'
                    }
                }
            }
        }
    };


    function CreateCandleStick(){

        const candlestickData = [
            {x: new Date('2023-01-01'), o: 100, h: 110, l: 90, c: 105},
            {x: new Date('2023-01-02'), o: 105, h: 130, l: 100, c: 115},
            {x: new Date('2023-01-03'), o: 115, h: 125, l: 105, c: 120},
            {x: new Date('2023-01-04'), o: 120, h: 135, l: 115, c: 130},
            {x: new Date('2023-01-05'), o: 130, h: 145, l: 125, c: 140},
            {x: new Date('2023-01-06'), o: 140, h: 160, l: 130, c: 150},
            {x: new Date('2023-01-07'), o: 150, h: 170, l: 140, c: 160},
            {x: new Date('2023-01-08'), o: 160, h: 180, l: 150, c: 170},
            {x: new Date('2023-01-09'), o: 170, h: 190, l: 160, c: 180},
            {x: new Date('2023-01-10'), o: 180, h: 200, l: 170, c: 190}
        ];


        const trace = {
            x: candlestickData.map(d => d.x),
            open: candlestickData.map(d => d.o),
            high: candlestickData.map(d => d.h),
            low: candlestickData.map(d => d.l),
            close: candlestickData.map(d => d.c),
            type: 'candlestick',
            xaxis: 'x',
            yaxis: 'y'
        };

        const layout = {
            title: 'Japanese Candlestick Chart',
            xaxis: {
                title: 'Date',
                type: 'date'
            },
            yaxis: {
                title: 'Price',
                autorange: true,
                fixedrange: false  // This makes the y-axis zoomable
            },
            plugins: {
                zoom: {
                    pan: {
                        enabled: true,
                        mode: 'y'
                    },
                    zoom: {
                        wheel: {
                            enabled: true
                        },
                        pinch: {
                            enabled: true
                        },
                        mode: 'y'
                    }
                }
            }
        };
        console.log("Im here")
        myChart=Plotly.newPlot('chart-wrapper', [trace], layout);
    }


    let myChart = new Chart(ctx, config);

    function changeChartType(newType) {
        if (myChart) {
            myChart.destroy();
        }
        if(newType == "candlestick"){
            CreateCandleStick()
        }else{
            config.type = newType;
            myChart = new Chart(ctx, config);
        }

    }
</script>
</body>
</html>
